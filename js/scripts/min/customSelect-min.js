jQuery.fn.customSelect=function(e){var t=$.extend({selectHidden:"select-hidden",divSelect:"select-div",inputSelect:"select-input",claseIcon:"icon",claseTrigger:"iconFont-downmenu",ulOptions:"select-ul",claseActivo:"select-activo",selectActive:"select-active",onChangeSelect:!1,disabledInput:"select-disabled"},e),i,n,s,l,a,c=function(e){$(e).parent().addClass($(e).data("clase")?$(e).data("clase"):$(e).parent().parent().attr("class"))},o=function(e){n=$(e).data("inputselect")&&!$(".msie8, .msie7, .msie6").length?'<input type="text" class="'+t.inputSelect+'" size="0">':'<span class="'+t.inputSelect+'" size="0"/>',$(e).after(n+'<span class="'+t.claseTrigger+'"/>'),d(e)},d=function(e){s=$(e).siblings("."+t.inputSelect),$(e).attr("disabled")&&($(e).data("inputselect")&&s.attr("disabled","disabled"),s.addClass(t.disabledInput).siblings("."+t.claseTrigger).addClass(t.disabledInput));var i=$(e).children("option").eq(0).text(),n="",l;$(e).children("option").each(function(e){$(this).attr("selected")&&(i=$(this).text(),0!==e&&(n=t.selectActive,l=!0))}),$(e).children("option").eq(0).data("icon")&&(n=n+" "+$(e).children("option").eq(0).data("icon")),$(e).data("inputselect")&&!$(".msie8, .msie7, .msie6").length?(s.attr("placeholder",$(e).children("option").eq(0).text()),l&&s.val(i)):s.text(i),s.addClass(n),r(e)},r=function(e){l=$("<ul />",{"class":t.ulOptions}).insertAfter($(e).parent().find("span."+t.claseTrigger));for(var n=0;i>n;n++){var s=$(e).children("option").eq(n);$("<li />",{text:s.text(),rel:s.val(),"data-icon":s.data("icon")}).appendTo(l)}a=l.children("li"),u(e)},p=function(e){t.onChangeSelect(e)},u=function(e){var i;i=$(e).data("inputselect")&&!$(".msie8, .msie7, .msie6").length?"span."+t.claseTrigger:"span."+t.claseTrigger+", span."+t.inputSelect,$(e).parent().on("click",i,function(i){$(this).hasClass(t.disabledInput)||(i.stopPropagation(),$("."+t.ulOptions).hide(),$(e).siblings("."+t.inputSelect).toggleClass(t.claseActivo),$(this).next("ul."+t.ulOptions).toggle())}),g(e)},h=function(e){$(e).siblings("."+t.inputSelect).removeClass(t.claseActivo),$("."+t.ulOptions).hide()},g=function(e){$(e).change().parent().on("click","ul li",function(i){v(e),i.stopPropagation(),s=$(e).siblings("."+t.inputSelect);var n=$(this);$(e).data("inputselect")&&!$(".msie8, .msie7, .msie6").length?s.val(n.text()):s.text(n.text()),s.removeClass(t.claseActivo).addClass(t.selectActive),$(e).val(n.attr("rel"));for(var l=0,a=$(e).children("option");l<a.length;l++)a.eq(l).val()===n.attr("rel")&&(a.eq(l).attr("selected","selected"),0===l&&(s.val(""),s.removeClass(t.selectActive)));$(e).siblings("ul").hide(),$(e).trigger("change"),m(s)}),$(e).on("change",function(i){i.stopPropagation(),t.onChangeSelect&&p(e)}),$(document).click(function(){h(e)})},v=function(e){$(e).children("option").each(function(){$(this).removeAttr("selected")})},f=function(e){$(e).attr("size",$(e).val().length)},m=function(e){$(e).keyup(function(){f(this)}).each(function(){f(this)})},S=function(e){i=$(e).children("option").length,$(e).parents("."+t.divSelect).length||($(e).addClass(t.selectHidden),$(e).wrap('<div class="'+t.divSelect+'"/>'),c(e),o(e))};return this.each(function(){S(this)})};